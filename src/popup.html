<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loom Downloader</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Help text display area at the very top -->
      <div id="helpTextDisplay" class="help-text-display hidden">
        <div class="help-text-content">
          <strong>How to Use:</strong> Navigate to a Loom video page or any page
          with a Loom embed, and the extension will automatically detect and
          extract video information. For password-protected videos, you'll be
          prompted to enter the password.
        </div>
      </div>

      <div class="header">
        <h2>Loom Downloader</h2>
        <div class="header-right">
          <button id="helpBtn" class="help-btn" title="Help">‚ùì</button>
        </div>
      </div>

      <div id="activationSection" class="activation-section">
        <label for="emailInput">Email:</label>
        <input type="email" id="emailInput" placeholder="Enter your email..." />
        <label for="licenseKeyInput">License Key:</label>
        <input
          type="text"
          id="licenseKeyInput"
          placeholder="Enter your license key..."
        />
        <button id="activateBtn" class="activate-btn">
          Activate Loom Downloader
        </button>
        <div id="activationStatus" class="status"></div>
        <a
          href="https://devinschumacher.gumroad.com/l/loom-video-downloader"
          id="buyKeyLink"
          class="buy-key-link"
          target="_blank"
          >Buy Product Key</a
        >
      </div>

      <div id="mainContent" class="hidden" style="margin-top: 20px">
        <div id="embedDetected" class="embed-detected hidden">
          <div class="embed-notice">
            <span class="embed-icon">üé•</span>
            <span class="embed-text">Loom embed detected on this page!</span>
          </div>
        </div>

        <div id="passwordSection" class="password-section hidden">
          <label for="passwordInput">Video Password:</label>
          <input
            type="password"
            id="passwordInput"
            placeholder="Enter password..."
          />
        </div>

        <div id="status" class="status">
          Checking current page for Loom video...
        </div>

        <div id="videoInfo" class="video-info hidden">
          <div class="video-card">
            <div class="video-thumbnail-container">
              <img
                id="videoThumbnail"
                src=""
                alt="Video thumbnail"
                class="video-thumbnail-image hidden"
              />
              <div id="thumbnailPlaceholder" class="thumbnail-placeholder">
                <div class="placeholder-content">
                  <div class="placeholder-icon">üé•</div>
                  <span class="placeholder-text">No thumbnail available</span>
                </div>
              </div>
              <div class="video-duration-badge" id="durationBadge"></div>
            </div>
            <div class="video-content">
              <h3 id="videoTitle" class="video-title">Loading...</h3>
              <div class="video-metadata">
                <div class="metadata-row">
                  <span class="metadata-label">By</span>
                  <span class="metadata-value" id="videoOwner"></span>
                </div>
                <div class="metadata-row">
                  <span class="metadata-label">Quality</span>
                  <span class="metadata-value" id="videoResolution"></span>
                </div>
                <div class="metadata-row">
                  <span class="metadata-label">Duration</span>
                  <span class="metadata-value" id="videoDuration"></span>
                </div>
              </div>
              <div class="video-description" id="videoDescription"></div>
            </div>
          </div>
        </div>

        <div id="qualitySection" class="quality-section hidden">
          <label for="qualitySelect">Choose Quality:</label>
          <select id="qualitySelect" class="quality-select">
            <option value="">Loading qualities...</option>
          </select>
        </div>

        <button id="downloadBtn" class="download-btn" disabled>
          <span class="btn-text">Download Video</span>
          <span class="btn-icon">‚¨á</span>
        </button>

        <div id="progress" class="progress-container hidden">
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div class="progress-info">
            <span id="progressText">0%</span>
            <span id="progressSpeed"></span>
          </div>
          <button id="cancelBtn" class="cancel-btn">
            <span class="btn-text">Cancel Download</span>
            <span class="btn-icon">‚úï</span>
          </button>
        </div>

        <div id="error" class="error hidden"></div>
      </div>

      <div class="footer">
        <!-- <button id="settingsBtn" class="settings-btn" title="Settings">
          ‚öôÔ∏è
        </button> -->
      </div>
    </div>

    <script src="auth.js"></script>
    <script src="popup-enhanced.js"></script>
  </body>
</html>
